<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>我将会在2026年7月28日公开我的身份</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{--bg:url(https://source.unsplash.com/daily);}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:#000;
    color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
    background-image:var(--bg);
    background-size:cover;
    background-position:center;
    transition:background-image 1s;
  }
  #top{position:absolute;top:1.2rem;text-align:center;text-shadow:0 0 6px rgba(0,0,0,.8);}
  #top h1{font-size:1.6rem;margin-bottom:.3rem;}
  #top p{font-size:1.1rem;}
  #countdown{font-size:3.5rem;font-weight:700;text-shadow:0 0 10px rgba(0,0,0,.9);}
  #countdown small{font-size:1.4rem;font-weight:400;}
  @media(max-width:600px){
    #countdown{font-size:2.4rem;}
    #top h1{font-size:1.3rem;}
  }
</style>
</head>
<body>
<div id="top">
  <h1 id="today"></h1>
  <p id="festival"></p>
</div>
<div id="countdown">
  <span id="d">--</span> 天
  <small id="hms">--:--:--</small>
</div>

<script>
/* ====== 北京时间 ====== */
function beijingNow() {
  return new Date(new Date().toLocaleString("en-US", { timeZone: "Asia/Shanghai" }));
}
function pad(n) { return n < 10 ? '0' + n : n; }

/* ====== 倒计时 ====== */
const target = new Date('2026-07-28T00:00:00+08:00');
function tick() {
  const now = beijingNow();
  const diff = target - now;
  if (diff <= 0) { document.getElementById('countdown').textContent = '🎉 已到达！'; return; }
  const d = Math.floor(diff / 864e5);
  const h = Math.floor(diff / 36e5) % 24;
  const m = Math.floor(diff / 6e4) % 60;
  const s = Math.floor(diff / 1e3) % 60;
  document.getElementById('d').textContent = d;
  document.getElementById('hms').textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
  document.title = `${d} 天 | 倒计时`;
}
tick(); setInterval(tick, 1000);

/* ====== 日期 & 农历 ====== */
const week = '日一二三四五六';
function loadFest() {
  const now = beijingNow();
  const y = now.getFullYear(), m = now.getMonth() + 1, d = now.getDate();
  document.getElementById('today').textContent = `${y}年${m}月${d}日  星期${week[now.getDay()]}`;
  // 直接写农历
  document.getElementById('festival').textContent = showLunar(y, m, d);
  // 立刻给背景
  setBg('popular');
}

/* ====== 背景图切换 ====== */
function setBg(keyword) {
  const halfHourSeed = new Date().toISOString().slice(0, 16); // 30 分钟级
  const url = keyword === 'popular'
              ? `https://source.unsplash.com/daily?${halfHourSeed}`
              : `https://source.unsplash.com/1600x900/?${keyword}&${halfHourSeed}`;
  document.documentElement.style.setProperty('--bg', `url(${url})`);
}

/* ====== 农历 ====== */
function showLunar(y, m, d) {
  const { month, day } = getLunar(y, m, d);
  return `农历 ${month}月${day}`;
}
function getLunar(y, m, d) {
  const lunarInfo = [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,
    0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977,
    0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970,
    0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,
    0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0,
    0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, 0x07954, 0x06aa0,
    0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, 0x05aa0, 0x076a3,
    0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0,
    0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0];
  const lMonth = ['正', '二', '三', '四', '五', '六', '七', '八', '九', '十', '冬', '腊'];
  const lDay = ['初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十',
    '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十',
    '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十'];
  const baseDate = new Date(Date.UTC(1900, 0, 31));
  const offset = Math.floor((Date.UTC(y, m - 1, d) - baseDate) / 864e5);
  let temp = 0, i;
  for (i = 1900; i < 2100 && offset > temp; i++) {
    temp += 348;
    for (let j = 0x8000; j > 0x8; j >>= 1) if (lunarInfo[i - 1900] & j) temp++;
    temp += leapDays(i);
  }
  i--; temp = offset - temp + leapDays(i);
  let month, day;
  for (month = 1; month < 13 && temp > 0; month++) {
    let t = monthDays(i, month);
    if (temp < t) break;
    temp -= t;
  }
  day = temp + 1;
  return { month: lMonth[month - 1], day: lDay[day - 1] };
}
function leapDays(y) { if (leapMonth(y)) { return (lunarInfo[y - 1900] & 0x10000) ? 30 : 29; } return 0; }
function leapMonth(y) { return (lunarInfo[y - 1900] & 0xf); }
function monthDays(y, m) { return (lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29; }
loadFest();
</script>

<!-- 30 分钟自动换背景 -->
<script>
(function () {
  function refreshBg() {
    const halfHourSeed = new Date().toISOString().slice(0, 16); // 30 分钟级
    const url = `https://source.unsplash.com/daily?${halfHourSeed}`;
    document.documentElement.style.setProperty('--bg', `url(${url})`);
  }
  /* 首次 30 分钟后执行，然后每 30 分钟继续 */
  setTimeout(() => {
    refreshBg();
    setInterval(refreshBg, 30 * 60 * 1000);
  }, 30 * 60 * 1000);
})();
</script>
</body>
</html>