<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æˆ‘å°†ä¼šåœ¨2026å¹´7æœˆ28æ—¥å…¬å¼€æˆ‘çš„èº«ä»½</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{--bg:url(https://source.unsplash.com/daily);}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:#000;
    color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
    background-image:var(--bg);
    background-size:cover;
    background-position:center;
    transition:background-image 1s;
  }
  #top{position:absolute;top:1.2rem;text-align:center;text-shadow:0 0 6px rgba(0,0,0,.8);}
  #top h1{font-size:1.6rem;margin-bottom:.3rem;}
  #top p{font-size:1.1rem;}
  #countdown{font-size:3.5rem;font-weight:700;text-shadow:0 0 10px rgba(0,0,0,.9);}
  #countdown small{font-size:1.4rem;font-weight:400;}
  @media(max-width:600px){
    #countdown{font-size:2.4rem;}
    #top h1{font-size:1.3rem;}
  }
</style>
</head>
<body>
<div id="top">
  <h1 id="today"></h1>
  <p id="festival"></p>
</div>
<div id="countdown">
  <span id="d">--</span> å¤©
  <small id="hms">--:--:--</small>
</div>

<script>
/* ====== åŒ—äº¬æ—¶é—´ ====== */
function beijingNow() {
  return new Date(new Date().toLocaleString("en-US", { timeZone: "Asia/Shanghai" }));
}
function pad(n) { return n < 10 ? '0' + n : n; }

/* ====== å€’è®¡æ—¶ ====== */
const target = new Date('2026-07-28T00:00:00+08:00');
function tick() {
  const now = beijingNow();
  const diff = target - now;
  if (diff <= 0) { document.getElementById('countdown').textContent = 'ðŸŽ‰ å·²åˆ°è¾¾ï¼'; return; }
  const d = Math.floor(diff / 864e5);
  const h = Math.floor(diff / 36e5) % 24;
  const m = Math.floor(diff / 6e4) % 60;
  const s = Math.floor(diff / 1e3) % 60;
  document.getElementById('d').textContent = d;
  document.getElementById('hms').textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
  document.title = `${d} å¤© | å€’è®¡æ—¶`;
}
tick(); setInterval(tick, 1000);

/* ====== æ—¥æœŸ & å†œåŽ† ====== */
const week = 'æ—¥ä¸€äºŒä¸‰å››äº”å…­';
function loadFest() {
  const now = beijingNow();
  const y = now.getFullYear(), m = now.getMonth() + 1, d = now.getDate();
  document.getElementById('today').textContent = `${y}å¹´${m}æœˆ${d}æ—¥  æ˜ŸæœŸ${week[now.getDay()]}`;
  // ç›´æŽ¥å†™å†œåŽ†
  document.getElementById('festival').textContent = showLunar(y, m, d);
  // ç«‹åˆ»ç»™èƒŒæ™¯
  setBg('popular');
}

/* ====== èƒŒæ™¯å›¾åˆ‡æ¢ ====== */
function setBg(keyword) {
  const halfHourSeed = new Date().toISOString().slice(0, 16); // 30 åˆ†é’Ÿçº§
  const url = keyword === 'popular'
              ? `https://source.unsplash.com/daily?${halfHourSeed}`
              : `https://source.unsplash.com/1600x900/?${keyword}&${halfHourSeed}`;
  document.documentElement.style.setProperty('--bg', `url(${url})`);
}

/* ====== å†œåŽ† ====== */
function showLunar(y, m, d) {
  const { month, day } = getLunar(y, m, d);
  return `å†œåŽ† ${month}æœˆ${day}`;
}
function getLunar(y, m, d) {
  const lunarInfo = [0x04bd8, 0x04ae0, 0x0a570, 0x054d5, 0x0d260, 0x0d950, 0x16554, 0x056a0, 0x09ad0, 0x055d2,
    0x04ae0, 0x0a5b6, 0x0a4d0, 0x0d250, 0x1d255, 0x0b540, 0x0d6a0, 0x0ada2, 0x095b0, 0x14977,
    0x04970, 0x0a4b0, 0x0b4b5, 0x06a50, 0x06d40, 0x1ab54, 0x02b60, 0x09570, 0x052f2, 0x04970,
    0x06566, 0x0d4a0, 0x0ea50, 0x06e95, 0x05ad0, 0x02b60, 0x186e3, 0x092e0, 0x1c8d7, 0x0c950,
    0x0d4a0, 0x1d8a6, 0x0b550, 0x056a0, 0x1a5b4, 0x025d0, 0x092d0, 0x0cab5, 0x0a950, 0x0b4a0,
    0x0baa4, 0x0ad50, 0x055d9, 0x04ba0, 0x0a5b0, 0x15176, 0x052b0, 0x0a930, 0x07954, 0x06aa0,
    0x0ad50, 0x05b52, 0x04b60, 0x0a6e6, 0x0a4e0, 0x0d260, 0x0ea65, 0x0d530, 0x05aa0, 0x076a3,
    0x096d0, 0x04bd7, 0x04ad0, 0x0a4d0, 0x1d0b6, 0x0d250, 0x0d520, 0x0dd45, 0x0b5a0, 0x056d0,
    0x055b2, 0x049b0, 0x0a577, 0x0a4b0, 0x0aa50, 0x1b255, 0x06d20, 0x0ada0];
  const lMonth = ['æ­£', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'å†¬', 'è…Š'];
  const lDay = ['åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
    'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
    'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å'];
  const baseDate = new Date(Date.UTC(1900, 0, 31));
  const offset = Math.floor((Date.UTC(y, m - 1, d) - baseDate) / 864e5);
  let temp = 0, i;
  for (i = 1900; i < 2100 && offset > temp; i++) {
    temp += 348;
    for (let j = 0x8000; j > 0x8; j >>= 1) if (lunarInfo[i - 1900] & j) temp++;
    temp += leapDays(i);
  }
  i--; temp = offset - temp + leapDays(i);
  let month, day;
  for (month = 1; month < 13 && temp > 0; month++) {
    let t = monthDays(i, month);
    if (temp < t) break;
    temp -= t;
  }
  day = temp + 1;
  return { month: lMonth[month - 1], day: lDay[day - 1] };
}
function leapDays(y) { if (leapMonth(y)) { return (lunarInfo[y - 1900] & 0x10000) ? 30 : 29; } return 0; }
function leapMonth(y) { return (lunarInfo[y - 1900] & 0xf); }
function monthDays(y, m) { return (lunarInfo[y - 1900] & (0x10000 >> m)) ? 30 : 29; }
loadFest();
</script>

<!-- 30 åˆ†é’Ÿè‡ªåŠ¨æ¢èƒŒæ™¯ -->
<script>
(function () {
  function refreshBg() {
    const halfHourSeed = new Date().toISOString().slice(0, 16); // 30 åˆ†é’Ÿçº§
    const url = `https://source.unsplash.com/daily?${halfHourSeed}`;
    document.documentElement.style.setProperty('--bg', `url(${url})`);
  }
  /* é¦–æ¬¡ 30 åˆ†é’ŸåŽæ‰§è¡Œï¼Œç„¶åŽæ¯ 30 åˆ†é’Ÿç»§ç»­ */
  setTimeout(() => {
    refreshBg();
    setInterval(refreshBg, 30 * 60 * 1000);
  }, 30 * 60 * 1000);
})();
</script>
</body>
</html>